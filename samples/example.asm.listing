LINE    ADDRESS     LABEL       MNEMONIC    OPERANDS        	COMMENTS

1       1000        TEST        START       1000            	TEST PROGRAM FOR SIC SOFTWARE
2       1000        FIRST       STL         RETADR          	SAVE RETURN ADDRESS
3       1003        CLOOP       JSUB        RDREC           	READ INPUT RECORD
4       1006                    LDA         LENGTH          	TEST FOR EOF (LENGTH = 0
5       1009                    COMP        ONE             	PLUS EOL OR EOF)
6       100c                    JEQ         ENDFIL          	EXIT IF EOF FOUND
7       100f                    JSUB        WRREC           	WRITE OUTPUT RECORD
8       1012                    J           CLOOP           	LOOP
9       1015        ENDFIL      LDA         EOF             	INSERT END OF FILE MARKER
a       1018                    STA         BUFFER          	
b       101b                    LDA         THREE           	SET LENGTH = 3
c       101e                    STA         LENGTH          	
d       1021                    JSUB        WRREC           	WRITE EOF
e       1024                    LDL         RETADR          	GET RETURN ADDRESS
f       1025                    RSUB                        	                      RETURN TO CALLER
10      1028        EOF         BYTE        C'EOF'          	
11      102b        THREE       WORD        3               	
12      102e        ZERO        WORD        0               	
13      1031        ONE         WORD        1               	
14      1034        FIVE        WORD        5               	
15      1037        RETADR      RESW        1               	
16      103a        LENGTH      RESW        1               	
17      203a        BUFFER      RESB        4096            	4096-BYTE BUFFER AREA
18      203a                                                	.
19      203a                                                	.       SUBROUTINE TO READ RECORD INTO BUFFER
1a      203a                                                	.
1b      203d        RDREC       LDX         ZERO            	CLEAR LOOP COUNTER
1c      2040                    LDA         ZERO            	CLEAR A TO ZERO
1d      2043        RLOOP       TD          INPUT           	TEST INPUT DEVICE
1e      2046                    JEQ         RLOOP           	LOOP UNTIL READY
1f      2049                    RD          INPUT           	READ CHARACTER INTO REGISTER A
20      204c                    COMP        FIVE            	TEST FOR EOL OR EOF
21      204f                    JLT         EXIT            	EXIT LOOP IF FOUND
22      2052                    STCH        BUFFER,X        	STORE CHARACTER IN BUFFER
23      2055                    TIX         MAXLEN          	LOOP UNLESS MAX LENGTH
24      2058                    JLT         RLOOP           	HAS BEEN REACHED
25      205b        EXIT        STCH        BUFFER,X        	STORE EOL/EOF IN BUFFER
26      205e                    STX         LENGTH          	SAVE RECORD LENGTH
27      2061                    LDA         LENGTH          	MODIFY RECORD LENGTH TO INCLUDE
28      2064                    ADD         ONE             	EOL OR EOF
29      2067                    STA         LENGTH          	
2a      2068                    RSUB                        	                      RETURN TO CALLER
2b      206a        INPUT       BYTE        X'F3'           	CODE FOR INPUT DEVICE
2c      206d        MAXLEN      WORD        4096            	
2d      206d                                                	.
2e      206d                                                	.       SUBROUTINE TO WRITE RECORD FROM BUFFER
2f      206d                                                	.
30      2070        WRREC       LDX         ZERO            	CLEAR LOOP COUNTER
31      2073        WLOOP       TD          OUTPUT          	TEST OUTPUT DEVICE
32      2076                    JEQ         WLOOP           	LOOP UNTIL READY
33      2079                    LDCH        BUFFER,X        	GET CHARACTER FROM BUFFER
34      207c                    WD          OUTPUT          	WRITE CHARACTER
35      207f                    TIX         LENGTH          	LOOP UNTIL ALL CHARACTERS
36      2082                    JLT         WLOOP           	HAVE BEEN WRITTEN
37      2083                    RSUB                        	                      RETURN TO CALLER
38      2085        OUTPUT      BYTE        X'06'           	CODE FOR OUTPUT DEVICE
39      2085                    END         FIRST           	
39      2085                    END         FIRST           	

PROGRAM LENGTH: 1085
